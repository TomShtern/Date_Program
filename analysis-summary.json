{
  "metadata": {
    "generated_at": "2026-01-26T00:00:00Z",
    "version": "2.0 Extended Analysis",
    "project": "Dating App",
    "platform": "Java 25 + JavaFX 25",
    "build_status": "passing",
    "test_status": "passing",
    "test_count": 464,
    "coverage_percent": 60,
    "java_files": 128,
    "test_files": 35,
    "fxml_files": 10,
    "analysis_domains": 8
  },
  "summary": {
    "total_issues": 87,
    "by_severity": {
      "critical": 12,
      "high": 28,
      "medium": 31,
      "low": 16
    },
    "by_category": {
      "core_services": 29,
      "storage_layer": 15,
      "ui_javafx": 12,
      "cli_handlers": 14,
      "domain_models": 10,
      "fxml_css": 10,
      "test_coverage": 12
    }
  },
  "top_blockers": [
    {
      "id": "CRIT-01",
      "title": "CLI String Literals Not Resolved",
      "severity": "Critical",
      "files": ["MatchingHandler.java", "StatsHandler.java"],
      "locations": 13,
      "impact": "CLI UI completely broken - shows garbage output"
    },
    {
      "id": "CRIT-02",
      "title": "Missing FXML onAction Handlers",
      "severity": "Critical",
      "files": ["matching.fxml", "chat.fxml"],
      "locations": 5,
      "impact": "Buttons crash app on click"
    },
    {
      "id": "CRIT-03",
      "title": "ResultSet Resource Leaks",
      "severity": "Critical",
      "files": ["All H2*Storage.java classes"],
      "locations": 30,
      "impact": "Connection exhaustion; database lockups"
    },
    {
      "id": "CRIT-04",
      "title": "Missing CASCADE DELETE Constraints",
      "severity": "Critical",
      "tables_affected": 13,
      "impact": "User deletion impossible; orphan data"
    },
    {
      "id": "CRIT-05",
      "title": "Missing CSS Class Definitions",
      "severity": "Critical",
      "classes": [".field-label", ".button-secondary-small", ".content-container", ".icon-button", ".toggle-group-container", ".settings-toggle"],
      "impact": "Broken UI appearance"
    },
    {
      "id": "CRIT-06",
      "title": "User.Storage Missing Delete Method",
      "severity": "Critical",
      "file": "User.java:49-67",
      "impact": "GDPR violation; cannot delete user data"
    },
    {
      "id": "HIGH-01",
      "title": "Missing ViewModel Cleanup Methods",
      "severity": "High",
      "viewmodels_affected": 8,
      "impact": "Memory leaks on every navigation"
    },
    {
      "id": "HIGH-03",
      "title": "Race Condition in MatchingService",
      "severity": "High",
      "file": "MatchingService.java:94-109",
      "impact": "Duplicate matches under load"
    },
    {
      "id": "HIGH-08",
      "title": "Zero Test Coverage for GeoUtils",
      "severity": "High",
      "file": "CandidateFinder.java:74-106",
      "impact": "Distance calculation bugs undetected"
    },
    {
      "id": "HIGH-10",
      "title": "Missing Transaction Handling",
      "severity": "High",
      "files": ["All storage classes"],
      "impact": "Inconsistent state on partial failures"
    }
  ],
  "critical_issues": [
    {
      "id": "CRIT-01",
      "category": "CLI",
      "title": "String literal constants not resolved",
      "description": "Code prints 'CliConstants.HEADER_...' instead of actual value",
      "files": ["MatchingHandler.java:127,177,180,259,260,289,534", "StatsHandler.java:41,49,72,87,114,137"],
      "fix": "Remove quotes: logger.info(CliConstants.HEADER_...) instead of logger.info(\"CliConstants.HEADER_...\")"
    },
    {
      "id": "CRIT-02",
      "category": "FXML",
      "title": "Missing onAction handler methods",
      "description": "5 FXML buttons reference handlers that don't exist",
      "handlers": ["handleBack", "handleExpandPreferences", "handleCheckLikes", "handleImproveProfile", "handleBrowseMatches"],
      "fix": "Add @FXML annotated methods to controllers"
    },
    {
      "id": "CRIT-03",
      "category": "Storage",
      "title": "ResultSet resource leaks",
      "description": "ResultSet not in try-with-resources in 30+ locations",
      "pattern": "ResultSet rs = stmt.executeQuery() outside try-with-resources",
      "fix": "Add ResultSet to try-with-resources statement"
    },
    {
      "id": "CRIT-04",
      "category": "Database",
      "title": "Missing ON DELETE CASCADE",
      "description": "13 tables have foreign keys without cascade delete",
      "tables": ["likes", "matches", "swipe_sessions", "user_stats", "friend_requests", "notifications", "blocks", "reports", "profile_notes", "profile_views", "conversations", "messages", "user_achievements"],
      "fix": "Add ON DELETE CASCADE to all FK constraints"
    },
    {
      "id": "CRIT-05",
      "category": "CSS",
      "title": "CSS classes used but not defined",
      "description": "6 CSS classes referenced in FXML have no definition",
      "classes": [".field-label", ".button-secondary-small", ".content-container", ".icon-button", ".toggle-group-container", ".settings-toggle"],
      "fix": "Add class definitions to theme.css"
    },
    {
      "id": "CRIT-06",
      "category": "Domain",
      "title": "User.Storage missing delete method",
      "description": "No way to delete users or their data",
      "impact": "GDPR right-to-be-forgotten violation",
      "fix": "Add delete(UUID id) to User.Storage interface"
    }
  ],
  "high_priority_issues": [
    {"id": "HIGH-01", "title": "Missing ViewModel cleanup/dispose methods"},
    {"id": "HIGH-02", "title": "Listener cleanup not called in 6 controllers"},
    {"id": "HIGH-03", "title": "Race condition in MatchingService"},
    {"id": "HIGH-04", "title": "Race condition in SessionService"},
    {"id": "HIGH-05", "title": "Missing login checks in RelationshipHandler"},
    {"id": "HIGH-06", "title": "Broken observable binding in MatchesController"},
    {"id": "HIGH-07", "title": "Navigation history not tracked"},
    {"id": "HIGH-08", "title": "Zero test coverage for GeoUtils.distanceKm()"},
    {"id": "HIGH-09", "title": "Zero test coverage for User.ProfileNote"},
    {"id": "HIGH-10", "title": "Missing transaction handling"},
    {"id": "HIGH-11", "title": "TrustSafetyService constructor accepts null"},
    {"id": "HIGH-12", "title": "Missing null checks in DailyService"}
  ],
  "test_coverage_gaps": {
    "zero_coverage": [
      "CandidateFinder.GeoUtils.distanceKm()",
      "User.ProfileNote (entire nested record)",
      "User.DatabaseRecord.Builder",
      "User.ProfileNoteStorage",
      "User.ProfileViewStorage"
    ],
    "missing_edge_cases": [
      "User.setAgeRange(18, 18) - same min/max",
      "User.addInterest(duplicate) - idempotence",
      "Match.generateId() with same UUIDs",
      "SwipeSession.recordSwipe() negative duration",
      "Dealbreakers.Evaluator with null fields",
      "Message constructor at exactly MAX_LENGTH"
    ],
    "missing_state_transitions": [
      "Match: FRIENDS→UNMATCHED",
      "Match: FRIENDS→BLOCKED",
      "Match: invalid transition paths",
      "User: PAUSED→INCOMPLETE",
      "SwipeSession: incrementMatchCount on COMPLETED"
    ],
    "missing_concurrency_tests": [
      "Match creation race condition",
      "Conversation creation by both users",
      "Like recording twice concurrently",
      "Concurrent user state transitions"
    ],
    "missing_integration_tests": [
      "H2ProfileDataStorage",
      "H2SocialStorage",
      "H2MetricsStorage",
      "H2ModerationStorage"
    ]
  },
  "missing_screens": [
    {"screen": "Email Verification", "priority": "P0"},
    {"screen": "Onboarding Wizard", "priority": "P1"},
    {"screen": "Settings/Privacy", "priority": "P1"},
    {"screen": "Notifications Center", "priority": "P1"},
    {"screen": "Payment/Subscription", "priority": "P2"},
    {"screen": "Photo Gallery", "priority": "P2"},
    {"screen": "Block/Report History", "priority": "P2"},
    {"screen": "Help/Support", "priority": "P3"}
  ],
  "missing_features": [
    {"screen": "Profile", "feature": "Photo cropping/resizing"},
    {"screen": "Profile", "feature": "Undo recent changes"},
    {"screen": "Matching", "feature": "Super Like implementation"},
    {"screen": "Matching", "feature": "Rewind (undo swipe from UI)"},
    {"screen": "Chat", "feature": "Message editing"},
    {"screen": "Chat", "feature": "Message search"},
    {"screen": "Chat", "feature": "Read receipts display"},
    {"screen": "Matches", "feature": "Sorting/filtering options"},
    {"screen": "Stats", "feature": "Export data feature"}
  ],
  "roadmap": {
    "week_1": {
      "focus": "Critical Fixes",
      "items": [
        "Fix CLI string literal bugs (CRIT-01)",
        "Add missing FXML handlers (CRIT-02)",
        "Fix ResultSet resource leaks (CRIT-03)",
        "Add missing CSS classes (CRIT-05)",
        "Add ViewModel cleanup methods (HIGH-01, HIGH-02)"
      ]
    },
    "week_2": {
      "focus": "High Priority",
      "items": [
        "Add User.Storage.delete() with cascade (CRIT-04, CRIT-06)",
        "Fix race conditions (HIGH-03, HIGH-04)",
        "Add login checks to RelationshipHandler (HIGH-05)",
        "Fix MatchesController observable binding (HIGH-06)",
        "Add GeoUtils and ProfileNote tests (HIGH-08, HIGH-09)"
      ]
    },
    "week_3": {
      "focus": "Medium Priority",
      "items": [
        "Add transaction handling (HIGH-10)",
        "Add missing database indexes (MED-05)",
        "Add input validation (MED-02)",
        "Add confirmation dialogs (MED-03)",
        "Fix navigation (HIGH-07, MED-13)"
      ]
    },
    "week_4_plus": {
      "focus": "Polish",
      "items": [
        "Centralize hardcoded constants",
        "Add error state UI feedback",
        "Add keyboard shortcuts",
        "Improve test coverage",
        "Add missing screens"
      ]
    }
  }
}
