<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<BorderPane fx:id="rootPane" prefHeight="700.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/21"
    xmlns:fx="http://javafx.com/fxml/1" fx:controller="datingapp.ui.controller.ChatController">
  <top>
    <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="header-bar">
      <Button onAction="#handleBack" styleClass="button-transparent">
        <graphic>
          <FontIcon iconLiteral="mdi2c-chevron-left" iconSize="24" iconColor="white"/>
        </graphic>
      </Button>
      <Label styleClass="subheading" text="Messages"/>
    </HBox>
  </top>

  <left>
    <VBox prefWidth="320.0" spacing="15.0" styleClass="sidebar">
      <padding>
        <Insets bottom="20" left="15" right="15" top="20"/>
      </padding>
      <Label styleClass="text-secondary conversation-section-label"
                                        text="CONVERSATIONS" />
      <ListView fx:id="conversationListView" VBox.vgrow="ALWAYS"/>
    </VBox>
  </left>

  <center>
    <StackPane>
      <!-- Chat Container -->
      <VBox fx:id="chatContainer" spacing="0.0">
        <HBox alignment="CENTER_LEFT" prefHeight="70.0" styleClass="header-bar">
          <padding>
            <Insets left="25" right="25"/>
          </padding>
          <Label fx:id="chatHeaderLabel" styleClass="subheading" text="User Name"/>
        </HBox>
        <ListView fx:id="messageListView" VBox.vgrow="ALWAYS"
                                                    styleClass="message-list-view" />
        <HBox spacing="15.0" alignment="CENTER" styleClass="header-bar">
          <padding>
            <Insets bottom="20" left="20" right="20" top="20"/>
          </padding>
          <TextArea fx:id="messageArea" prefHeight="50.0" promptText="Type a message..."
                                                                wrapText="true" HBox.hgrow="ALWAYS" />
          <Button fx:id="sendButton" onAction="#handleSendMessage" prefHeight="50.0"
                                                                prefWidth="60.0" styleClass="button">
            <graphic>
              <FontIcon iconLiteral="mdi2s-send" iconSize="20" iconColor="white"/>
            </graphic>
          </Button>
        </HBox>
      </VBox>
      <!-- Empty State - Redesigned -->
      <VBox fx:id="emptyStateContainer" alignment="CENTER" spacing="12.0">
        <FontIcon iconLiteral="mdi2g-ghost" iconSize="100" iconColor="#a78bfa" styleClass="browse-empty-icon"/>
        <Label text="Start a conversation" styleClass="empty-state-title">
          <VBox.margin>
            <Insets top="10"/>
          </VBox.margin>
        </Label>
        <Label text="Match with someone to begin chatting." styleClass="empty-state-subtitle"/>
        <Button text="Browse Matches" onAction="#handleBrowseMatches" styleClass="browse-matches-button">
          <VBox.margin>
            <Insets top="15"/>
          </VBox.margin>
        </Button>
      </VBox>
    </StackPane>
  </center>
</BorderPane>
